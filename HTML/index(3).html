<!Doctype html>
	<html>
		<head>
			<meta charset="UTF8">
			<style>
				body{
					background-image: url(1.jpg);
					background-size: cover;
					}
				.div{
					margin-left: 25%;
					margin-right: 25%;
					margin-top: 10%;
				}
				#text-1{
					width: 48%;
					height: 20px;
					border-radius: 5px;
					text-align: center;
					outline: none;
					border: 2px solid #4248f4;
					box-shadow: 0 0 50px #4248f4;
					background-color: #c3dff4;
					color: #474def;
					font-weight: bold;
					resize: none;
				}
				#text-2	{
					width: 43%;
					height: 20px;
					border-radius: 5px;
					text-align: center;
					outline: none;
					border: 2px solid #4248f4;
					box-shadow: 0 0 50px #4248f4;
					background-color: #c3dff4;
					color: #474def;
					font-weight: bold;
					resize: none;
					display: block;
				}
				#select{
					height: 33px;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					cursor: pointer;
					font-weight: bold;
				}
				#select:hover{
					box-shadow: 0 0 20px #c7f400;
				}
				#select:active{
					color: white;
				}
				.span-1{
					font-weight: bold;
					font-size: 25px;
					color: #20e1e8;
				}
				.span-2{
					font-size: 20px;
					font-weight: bold;
					color: #20e1e8;
				}
				.button-1{
					height: 33px;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					cursor: pointer;
					font-weight: bold;
					margin-left: 89%;
				}
				.button-1:active{
					background-color: #0700ed;
					color: white;
				}
				#button-2:active{
					background-color: #0700ed;
					color: white;
				}
				#button-2{
					height: 33px;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					cursor: pointer;
					font-weight: bold;
				}
				#button-3:active{
					background-color: #0700ed;
					color: white;
				}
				#button-3{
					height: 33px;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					cursor: pointer;
					font-weight: bold;
				}
				#date{
					height: 33px;
					width: 10%;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					font-weight: bold;
					margin-top: 3%;
					resize: none;
					font-size: 28px;
				}
				#div1{
					margin-left: 30%;
					margin-bottom: 10%;
				}
				#div2{
					margin-left: 25%;
					margin-right: 25%;
					margin-bottom: 10%;
				}
				#div1 h1{
					color: #20e1e8;
				}
				#button-4:active{
					background-color: #0700ed;
					color: white;
				}
				#button-4{
					height: 33px;
					border-radius: 7px;
					color: #35cece;
					background-color: #4b4ee5;
					outline: none;
					box-shadow: 0 0 20px #0004ff;
					border: 1px solid #9347e5;
					cursor: pointer;
					font-weight: bold;
					margin-left: 89%;
					margin-top: 1%;
				}
				.button-1:hover{
					box-shadow: 0 0 20px #c7f400;
				}
				#button-4:hover{
					box-shadow: 0 0 20px #c7f400;
				}
				#button-3:hover{
					box-shadow: 0 0 20px #c7f400;
				}
				#button-2:hover{
					box-shadow: 0 0 20px #c7f400;
				}
			</style>
		</head>
		<body>
			<a href='file:///H:/SegrysProject/version%201.0%20(1).html'><button class='button-1'>Выйти из аккаунта.</button></a>
			<button id='button-4'>Удалить аккаунт.</button>
			<div class="div">
				<textarea type='text' placeholder='Введите сумму, которая у вас есть на данный момент.' id='text-1'	></textarea>
				<span class='span-2'>Валюта-</span>	
				<select id='select'>
					<option value = " руб.">"R", Рубли.</option>
					<option value = "$">"$", Доллары.</option>
					<option value = "₴">"₴", Гривны.</option>
					<option value = "₸">"₸", Тенге.</option>
					<option value = "P">"P", Белорусские рубли.</option>
				</select><br>
				<span class='span-2'>Введите кол-во дней на которые вы<br>расчитываете растянуть деньги.</span><br>
				<textarea id='date'></textarea><br>
				<button id='button-2'>Сохранить.</button>
			</div>
			<div id='div1'>
			</div>
			<div id='div2'>
				<textarea id="text-2" placeholder="Введите кол-во денег потраченные сегодня."></textarea>
				<button id="button-3">Подтвердить.</button>
			</div>
			<script>
				'use strict'
				let button = document.getElementById("button-2");
				let button2 = document.getElementById("button-3");
				let button3 = document.getElementById("button-4");
				let select = document.getElementById("select");
				let text  = document.getElementById("text-1");
				let text1 = document.getElementById("date");
				let text2 = document.getElementById("text-2");
				let date = document.getElementById("date");
				let div = document.getElementById("div1");
				let c;
				let c1;
				let d1;
				let b;
				let b1;
				let b2;

				let h1 = document.createElement("h1");

				let l = localStorage.getItem("date");
				if(l!=undefined){
					b1 = l;
					date.value = l;
				};
				let l1 = localStorage.getItem("select");
				if(l1!=undefined){
					select.value = l1;
				};
				let l2 = localStorage.getItem("text");
				if(l2!=undefined){
					b = l2;
					text.value = l2;
				};
				let l3 = localStorage.getItem("pre-last");
				if(l3!=undefined){
					c1 = l3;
					c1 = +c1;
				};
				let l4 = localStorage.getItem("today");
				if(l4!=undefined){
					b2 = l4;
					b2 = +b2;
					text2.value = l4;
				};
				let l5 = localStorage.getItem("last");
				if(l5!=undefined){
					c = l5;
					c = +c;
				};
				if(c!=undefined&select.value!=undefined){
					div.appendChild(h1).innerHTML = "Завтра вам стоит потратить не больше " +c +select.value;
				};

				function isDigit(str) {
					return str && !/[^\d]/.test(str);
				};

				button3.addEventListener('click', function(){
					localStorage.removeItem('date');
					localStorage.removeItem('select');
					localStorage.removeItem('text');
					localStorage.removeItem('pre-last');
					localStorage.removeItem('today');
					localStorage.removeItem('last');
					localStorage.removeItem('login3965');
					localStorage.removeItem('password3965');
					location.href = 'file:///H:/SegrysProject/version%201.0%20(1).html';
				});

				button.addEventListener('click', function(){
					
					if((isDigit(text.value)) === true&(isDigit(date.value)) === true){
						let a = text.value;
						b = +a;
						localStorage.setItem('text', b) 
						let d = date.value;
						b1 = +d;
						localStorage.setItem('date', b1);	
						c = b/b1;
						localStorage.setItem('last', c);
						c1 = c;
						localStorage.setItem('pre-last', c1);
						div.appendChild(h1).innerHTML = "Завтра вам стоит потратить не больше " +c +select.value;
					}
					else
					{
						alert("Были введены числа или не было введно ничего.\nПожалуйста введите только цифры.")
					};

				});

				button2.addEventListener('click', function(){
					if(div.appendChild(h1).innerHTML === ""){
						alert("Для начала задайте верхние параметры.");
					}
					else
					{	
						if((isDigit(text2.value)) === true){
							b1=b1-1;
							date.value = b1;
							localStorage.setItem('date', b1);
							if(b1>0){
								let a1 = text2.value;
								b2 = +a1;
								c = +c;
								localStorage.setItem('today', b2);
								if(c<b2){
									d1 = c-b2;
									c = c1;
									localStorage.setItem('last', c);
									c = c+d1;
									localStorage.setItem('last', c);
									alert("Увы! Вы потратили больше нормы на " +(-d1) +select.value);
									alert("Теперь ваша дозволенная трата на завтра уменьшится на " +(-d1) +select.value);
									div.appendChild(h1).innerHTML = "Завтра вам стоит потратить не больше " +c +select.value;
								}
								else
								if(c>b2){
									d1 = c-b2;
									c = c1;
									localStorage.setItem('last', c);
									c = c+d1;
									localStorage.setItem('last', c);
									alert("Вау! Вы сэкономили " +d1 +select.value);
									alert("Теперь ваша дозволенная трата на завтра увеличится на " +d1 +select.value);
									div.appendChild(h1).innerHTML = "Завтра вам стоит потратить не больше " +c +select.value;
								}
								else
								if(c===b2){
									c = c1;
									alert("Так держать! Сегодня вы потратили не больше дозволенного.")
									div.appendChild(h1).innerHTML = "Завтра вам стоит потратить не больше " +c +select.value;
									localStorage.setItem('last', c);

								}
							}
							else
							if(b1===0){
								alert("Поздравляем, вы выжили.");
								text.value = "";
								text1.value = "";
								text2.value = "";
								select.value = " руб."; 
								div.appendChild(h1).innerHTML = "";
								localStorage.removeItem('date');
								localStorage.removeItem('select');
								localStorage.removeItem('text');
								localStorage.removeItem('pre-last');
								localStorage.removeItem('today');
								localStorage.removeItem('last');
							};
						}	
						else
						{
							alert("Были введены числа или не было введно ничего.\nПожалуйста введите только цифры.");
						};
					};	
				});
			</script>
		</body>
	</html>
